<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mabelle Secrets - Sua Loja de Prazer</title>
    <!-- Fontes do Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- Configurações Gerais e Cores --- */
        :root {
            --cor-principal: #c53364; /* Rosa escuro / Magenta */
            --cor-fundo: #121212;     /* Fundo escuro */
            --cor-texto: #f5f5f5;     /* Texto claro */
            --cor-card: #1e1e1e;      /* Fundo dos cards de produto */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--cor-fundo);
            color: var(--cor-texto);
            overflow-x: hidden;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        img {
            max-width: 100%;
            display: block;
        }

        a {
            text-decoration: none;
            color: var(--cor-principal);
            transition: color 0.3s ease;
        }

        a:hover {
            color: var(--cor-texto);
        }

        /* --- Verificador de Idade --- */
        #age-gate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 1000; display: flex; justify-content: center; align-items: center;
            text-align: center; transition: opacity 0.5s ease; backdrop-filter: blur(5px);
        }
        .age-gate-box {
            background-color: var(--cor-card); padding: 40px; border-radius: 10px;
            max-width: 500px; border: 1px solid #333;
        }
        .age-gate-box h1 { color: var(--cor-principal); margin-bottom: 15px; font-size: 2em; }
        .age-gate-box p { margin-bottom: 30px; line-height: 1.6; color: #ccc; }
        .age-gate-buttons button {
            padding: 15px 30px; border: none; border-radius: 5px; font-size: 16px;
            font-weight: 700; cursor: pointer; transition: all 0.3s ease; margin: 0 10px;
        }
        #age-gate-enter { background-color: var(--cor-principal); color: white; }
        #age-gate-enter:hover { transform: scale(1.05); box-shadow: 0 0 15px var(--cor-principal); }
        #age-gate-exit { background-color: #333; color: var(--cor-texto); }
        #age-gate-exit:hover { background-color: #444; }

        /* --- Estrutura das Páginas --- */
        .page-section { display: none; } /* Todas as páginas começam ocultas */
        .page-section.active { display: block; } /* A página ativa é exibida */
        
        /* --- Cabeçalho --- */
        header {
            background-color: var(--cor-card); padding: 20px 0;
            border-bottom: 1px solid #333; position: sticky; top: 0; z-index: 100;
        }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 28px; font-weight: 700; color: var(--cor-principal); cursor: pointer; }
        nav ul { list-style: none; display: flex; gap: 30px; }
        nav a { color: var(--cor-texto); font-weight: 500; position: relative; cursor: pointer; }
        nav a::after {
            content: ''; position: absolute; width: 0; height: 2px;
            bottom: -5px; left: 0; background-color: var(--cor-principal); transition: width 0.3s ease;
        }
        nav a:hover::after { width: 100%; }
        
        /* --- Botão e Título Padrão --- */
        .page-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 40px;
            border-bottom: 1px solid #333;
            padding-bottom: 20px;
        }
        .back-button {
            background: none; border: none; color: var(--cor-texto); cursor: pointer;
        }
        .back-button svg { width: 32px; height: 32px; }
        .section-title { font-size: 36px; color: var(--cor-principal); margin: 0; }
        
        /* --- Seção de Destaque (Hero) --- */
        .hero {
            background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://i.imgur.com/eCmaSf2.png');
            background-size: cover; background-position: center; padding: 100px 0; text-align: center;
        }
        .hero h2 { font-size: 48px; margin-bottom: 20px; text-shadow: 2px 2px 5px rgba(0,0,0,0.5); }
        .hero p { font-size: 18px; margin-bottom: 30px; }
        .btn {
            background-color: var(--cor-principal); color: white; padding: 15px 35px; border-radius: 5px;
            font-size: 16px; font-weight: 700; transition: all 0.3s ease; border: 2px solid var(--cor-principal);
            cursor: pointer; display: inline-block;
        }
        .btn:hover { color: white; transform: scale(1.05); box-shadow: 0 0 15px var(--cor-principal); }
        
        /* --- Seção de Produtos --- */
        .products-section, .categories-section, .gemini-section { padding: 60px 0; }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }
        .product-card {
            background-color: var(--cor-card); border-radius: 10px; overflow: hidden; text-align: center;
            padding-bottom: 20px; transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #333; cursor: pointer; display: flex; flex-direction: column;
        }
        .product-card:hover { transform: translateY(-10px); box-shadow: 0 10px 20px rgba(197, 51, 100, 0.2); }
        .product-card img { width: 100%; height: 250px; object-fit: cover; }
        .product-card-content { padding: 0 15px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .product-card h3 { font-size: 18px; margin: 15px 0 10px; height: 50px; }
        .product-price { font-size: 20px; font-weight: 700; color: var(--cor-principal); margin-bottom: 15px; }
        
        /* --- Seção de Categorias --- */
        .categories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; }
        .category-card {
            position: relative; border-radius: 10px; overflow: hidden;
            height: 350px; display: block;
        }
        .category-card img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; }
        .category-card:hover img { transform: scale(1.1); }
        .category-card-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0));
            display: flex; justify-content: center; align-items: flex-end; padding: 20px; text-align: center;
        }
        .category-card h3 { color: white; font-size: 24px; text-shadow: 1px 1px 3px black; margin: 0; }

        /* --- Página de Detalhes do Produto --- */
        #page-product-detail .container { padding-top: 60px; }
        .product-detail-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: flex-start; }
        .product-detail-image img { border-radius: 10px; }
        .product-detail-info h2 { font-size: 32px; color: var(--cor-principal); margin-bottom: 15px; }
        .product-detail-info .product-price { font-size: 28px; margin-bottom: 20px; }
        .product-detail-info p { line-height: 1.8; margin-bottom: 30px; color: #ccc; }
        .gemini-button {
            background: transparent; border: 2px solid var(--cor-principal); color: var(--cor-principal);
            margin-top: -15px; margin-bottom: 20px;
        }
        
        /* --- Funcionalidades Gemini --- */
        #gemini-suggestion-container {
            background-color: var(--cor-card);
            border: 1px solid #333;
            border-radius: 10px;
            padding: 30px;
            margin-top: 20px;
            text-align: center;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #gemini-suggestion-result {
            font-style: italic;
            color: #ddd;
            line-height: 1.7;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--cor-principal);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* --- Rodapé --- */
        footer { background-color: var(--cor-card); padding: 40px 0; border-top: 1px solid #333; text-align: center; }
        .footer-contact {
            display: flex; justify-content: center; align-items: center;
            gap: 30px; margin-top: 20px; flex-wrap: wrap;
        }
        .social-icon {
            display: flex; align-items: center; gap: 10px;
            color: var(--cor-texto); font-size: 16px;
        }
        .social-icon svg { width: 28px; height: 28px; }
        
        /* --- Layout Responsivo --- */
        @media (max-width: 768px) {
            nav { display: none; }
            .hero h2 { font-size: 36px; }
            .section-title { font-size: 28px; }
            .age-gate-buttons { display: flex; flex-direction: column; gap: 15px; }
            .product-detail-layout { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <!-- Módulo de Verificação de Idade -->
    <div id="age-gate">
        <div class="age-gate-box">
            <h1>Bem-vindo(a) à Mabelle Secrets</h1>
            <p>Este site contém conteúdo destinado a adultos. Para entrar, você deve ter 18 anos ou mais. Ao continuar, você confirma que tem idade legal para visualizar este conteúdo em sua região.</p>
            <div class="age-gate-buttons">
                <button id="age-gate-enter">Tenho mais de 18 anos</button>
                <button id="age-gate-exit">Sair</button>
            </div>
        </div>
    </div>

    <!-- Conteúdo Principal do Site (Gerenciado por JS) -->
    <div id="main-content">
        <header>
            <div class="container header-content">
                <div class="logo">Mabelle Secrets</div>
                <nav>
                    <ul>
                        <li><a data-category="Lançamentos">Lançamentos</a></li>
                        <li><a data-category="Para Elas">Para Elas</a></li>
                        <li><a data-category="Para Eles">Para Eles</a></li>
                        <li><a data-category="Lingeries">Lingeries</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <main>
            <!-- PÁGINA INICIAL -->
            <section id="page-home" class="page-section">
                <div class="hero">
                    <div class="container">
                        <h2>Liberte Seus Desejos</h2>
                        <p>Produtos selecionados para suas melhores experiências. Embalagem 100% discreta.</p>
                        <a class="btn nav-link" data-category="Lançamentos">Explorar Lançamentos</a>
                    </div>
                </div>
                <!-- Nova secção Gemini -->
                <div class="gemini-section container">
                    <h2 class="section-title">Precisa de Inspiração?</h2>
                    <p style="text-align: center; margin-bottom: 20px;">Deixe a nossa assistente virtual criar o ambiente perfeito para si.</p>
                    <button id="gemini-suggestion-btn" class="btn" style="margin: 0 auto; display: block;">Gerar Sugestão da Noite ✨</button>
                    <div id="gemini-suggestion-container">
                        <div id="gemini-suggestion-result">A sua sugestão aparecerá aqui...</div>
                    </div>
                </div>
                <div class="products-section container" id="home-products">
                     <h2 class="section-title">Destaques da Semana</h2>
                     <div class="products-grid"></div>
                </div>
                <div class="categories-section container">
                    <h2 class="section-title">Categorias Populares</h2>
                    <div class="categories-grid"></div>
                </div>
            </section>

            <!-- PÁGINA DE CATEGORIA (gerada dinamicamente) -->
            <section id="page-category" class="page-section">
                <div class="products-section container">
                    <div class="page-header">
                        <button class="back-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 9l-3 3m0 0l3 3m-3-3h7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></button>
                        <h2 class="section-title" id="category-title">Categoria</h2>
                    </div>
                    <div class="products-grid"></div>
                </div>
            </section>

            <!-- PÁGINA DE DETALHES DO PRODUTO (gerada dinamicamente) -->
            <section id="page-product-detail" class="page-section">
                 <div class="container">
                    <div class="page-header">
                         <button class="back-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 9l-3 3m0 0l3 3m-3-3h7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></button>
                    </div>
                    <div class="product-detail-layout">
                        <div class="product-detail-image">
                            <img src="" alt="">
                        </div>
                        <div class="product-detail-info">
                            <h2 class="product-name">Nome do Produto</h2>
                            <p class="product-price">R$ 0,00</p>
                            <button class="btn gemini-button" id="gemini-description-btn">Gerar Descrição Criativa ✨</button>
                            <p class="product-description">Descrição completa do produto...</p>
                            <a href="#" class="btn whatsapp-button" target="_blank" rel="noopener noreferrer">Comprar no WhatsApp</a>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <footer>
            <div class="container">
                <p>&copy; 2025 Mabelle Secrets. Todos os direitos reservados. Envio discreto para todo o Brasil.</p>
                <div class="footer-contact">
                    <a href="https://www.instagram.com/mabelle.tangara?utm_source=ig_web_button_share_sheet&igsh=cXQ3MjB5bzU4dTZo" target="_blank" rel="noopener noreferrer" class="social-icon">
                        <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.585-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.585-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.585.069-4.85c.149-3.225 1.664 4.771 4.919 4.919C8.415 2.175 8.796 2.163 12 2.163m0-2.163C8.74 0 8.333.012 7.053.072 2.695.272.273 2.69.073 7.052.012 8.333 0 8.74 0 12s.012 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.988 8.74 24 12 24s3.667-.012 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98C23.988 15.667 24 15.26 24 12s-.012-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98C15.667.012 15.26 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.88 1.44 1.44 0 000-2.88z"></path></svg>
                        <span>mabelle.tangara</span>
                    </a>
                    <a href="#" id="footer-whatsapp-link" target="_blank" rel="noopener noreferrer" class="social-icon">
                        <svg fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.996 0-3.935-.53-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.886-.001 2.267.655 4.398 1.803 6.182l-.341 1.236 1.241-.328z"></path></svg>
                        <span>(65) 99928-7778</span>
                    </a>
                </div>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- BANCO DE DADOS DE PRODUTOS (SIMULADO) ---
            const products = [
                { id: 1, name: 'Vibrador Sônico Pro', price: 299.90, image: 'https://images.unsplash.com/photo-1617804159114-1b5962788533?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', category: 'Para Elas', description: 'Tecnologia sônica para sensações incomparáveis. Múltiplas intensidades e material de silicone seguro para o corpo.', featured: true },
                { id: 2, name: 'Lingerie Renda Noire', price: 189.90, image: 'https://images.unsplash.com/photo-1619118399587-fd8935447e17?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=387&q=80', category: 'Lingeries', description: 'Conjunto de lingerie em renda preta, desenhado para valorizar suas curvas com elegância e sensualidade.', featured: true },
                { id: 3, name: 'Óleo de Massagem Corporal', price: 89.90, image: 'https://images.unsplash.com/photo-1620916566398-39f19a3e7e3b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=435&q=80', category: 'Cosméticos', description: 'Óleo com fragrância afrodisíaca, perfeito para momentos de relaxamento e intimidade. Desliza facilmente sobre a pele.', featured: true },
                { id: 4, name: 'Plug Anal Iniciante', price: 129.90, image: 'https://images.unsplash.com/photo-1603722350802-b31a0a241a7c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', category: 'Para Eles', description: 'Ideal para quem está começando a explorar o prazer anal. Feito de silicone macio e com base segura.', featured: true },
                { id: 5, name: 'Kit Fantasia Colegial', price: 159.90, image: 'https://images.unsplash.com/photo-1594912223528-9a9b23351221?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=387&q=80', category: 'Lingeries', description: 'Realize suas fantasias com este kit completo de colegial, incluindo saia, top e acessórios.', featured: true },
                { id: 6, name: 'Gel Excitante Hot Kiss', price: 49.90, image: 'https://images.unsplash.com/photo-1631089552195-8f029063b5e4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=387&q=80', category: 'Cosméticos', description: 'Gel beijável com efeito quente que aumenta a sensibilidade e o prazer. Perfeito para preliminares.', featured: true },
                { id: 7, name: 'Anel Peniano com Vibração', price: 99.90, image: 'https://images.unsplash.com/photo-1639550325179-8c4f923521b3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=774&q=80', category: 'Para Eles', description: 'Prolonga a ereção e proporciona vibrações estimulantes para o casal. Material flexível e confortável.', featured: false },
                { id: 8, name: 'Vela Beijável Sabor Morango', price: 79.90, image: 'https://images.unsplash.com/photo-1616110943943-d3435d3d8201?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=387&q=80', category: 'Cosméticos', description: 'Acenda, espere derreter e use como um óleo de massagem quente e beijável. Delicioso sabor de morango.', featured: true },
                { id: 9, name: 'Bullet Vibrador Discreto', price: 119.90, image: 'https://images.unsplash.com/photo-1621484252328-55d1b1fba5b5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=387&q=80', category: 'Para Elas', description: 'Pequeno, potente e discreto. Perfeito para levar na bolsa e usar onde a imaginação permitir.', featured: false },
                { id: 10, name: 'Body Chain Sensual', price: 139.90, image: 'https://images.unsplash.com/photo-1642699293132-a4f220376587?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=387&q=80', category: 'Lingeries', description: 'Acessório corporal que enfeita e adiciona um toque extra de sensualidade ao seu visual.', featured: false }
            ];
            
            // --- ESTADO DA APLICAÇÃO ---
            let historyStack = ['page-home']; // Pilha para o botão "Voltar"
            let currentProduct = null; // Armazena o produto da página de detalhe

            // --- ELEMENTOS DO DOM ---
            const ageGate = document.getElementById('age-gate');
            const mainContent = document.getElementById('main-content');
            const pages = document.querySelectorAll('.page-section');
            
            // --- FUNÇÃO DE CHAMADA DA API GEMINI ---
            const callGeminiAPI = async (prompt, resultContainer) => {
                const apiKey = "AIzaSyC2fHWnV4Dk7AFNad1bfwigfqHc19PJHMI"; // Chave da API adicionada
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                
                resultContainer.innerHTML = '<div class="loader"></div>';

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }]
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    const text = data.candidates[0].content.parts[0].text;
                    resultContainer.innerHTML = text.replace(/\n/g, '<br>');

                } catch (error) {
                    console.error("Erro na API Gemini:", error);
                    resultContainer.textContent = 'Não foi possível gerar a sugestão. Tente novamente mais tarde.';
                }
            };

            // --- FUNÇÕES DE RENDERIZAÇÃO ---
            
            const formatPrice = (price) => `R$ ${price.toFixed(2).replace('.', ',')}`;

            const createProductCard = (product) => `
                <div class="product-card" data-id="${product.id}">
                    <img src="${product.image}" alt="${product.name}">
                    <div class="product-card-content">
                        <div>
                            <h3>${product.name}</h3>
                            <p class="product-price">${formatPrice(product.price)}</p>
                        </div>
                    </div>
                </div>`;

            const renderProducts = (productsToRender, containerSelector) => {
                const container = document.querySelector(containerSelector);
                container.innerHTML = productsToRender.map(createProductCard).join('');
                container.querySelectorAll('.product-card').forEach(card => {
                    card.addEventListener('click', () => showProductDetail(card.dataset.id));
                });
            };
            
            // --- FUNÇÕES DE NAVEGAÇÃO ---
            const navigateTo = (pageId, addToHistory = true) => {
                pages.forEach(page => page.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
                window.scrollTo(0, 0);
                if (addToHistory && historyStack[historyStack.length - 1] !== pageId) {
                    historyStack.push(pageId);
                }
            };
            
            const goBack = () => {
                if (historyStack.length > 1) {
                    historyStack.pop();
                    const previousPage = historyStack[historyStack.length - 1];
                    // Se voltar para detalhes do produto, restaura a descrição original
                    if (previousPage.startsWith('page-product-detail')) {
                        const detailPage = document.getElementById('page-product-detail');
                        if (currentProduct) {
                            detailPage.querySelector('.product-description').textContent = currentProduct.description;
                        }
                    }
                    navigateTo(previousPage, false);
                }
            };

            // --- FUNÇÕES DE LÓGICA DE PÁGINA ---

            const showCategoryPage = (categoryName) => {
                document.getElementById('category-title').textContent = categoryName;
                let filteredProducts;
                if (categoryName === 'Lançamentos') {
                    filteredProducts = products.slice(-5); 
                } else {
                    filteredProducts = products.filter(p => p.category === categoryName);
                }
                renderProducts(filteredProducts, '#page-category .products-grid');
                navigateTo('page-category');
            };
            
            const showProductDetail = (productId) => {
                const product = products.find(p => p.id == productId);
                if (!product) return;
                currentProduct = product; // Armazena o produto atual
                
                const detailPage = document.getElementById('page-product-detail');
                detailPage.querySelector('.product-detail-image img').src = product.image;
                detailPage.querySelector('.product-detail-image img').alt = product.name;
                detailPage.querySelector('.product-name').textContent = product.name;
                detailPage.querySelector('.product-price').textContent = formatPrice(product.price);
                detailPage.querySelector('.product-description').textContent = product.description;
                
                const whatsappButton = detailPage.querySelector('.whatsapp-button');
                const phoneNumber = '5565999287778';
                const message = `Olá! Tenho interesse no produto: ${product.name} - ${formatPrice(product.price)}`;
                const encodedMessage = encodeURIComponent(message);
                
                whatsappButton.href = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
                
                navigateTo('page-product-detail');
            };

            // --- INICIALIZAÇÃO E LISTENERS ---
            
            const initializeSite = () => {
                renderProducts(products.filter(p => p.featured), '#home-products .products-grid');
                
                const categories = [...new Set(products.map(p => p.category))];
                const categoriesContainer = document.querySelector('#page-home .categories-grid');
                categoriesContainer.innerHTML = categories.map(cat => `
                    <a class="category-card nav-link" data-category="${cat}">
                        <img src="https://placehold.co/400x500/1e1e1e/f5f5f5?text=${cat}" alt="${cat}">
                        <div class="category-card-overlay"><h3>${cat}</h3></div>
                    </a>`).join('');

                document.querySelectorAll('.nav-link, nav a').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        showCategoryPage(link.dataset.category);
                    });
                });

                document.querySelector('.logo').addEventListener('click', () => navigateTo('page-home'));
                document.querySelectorAll('.back-button').forEach(btn => btn.addEventListener('click', goBack));
                
                const footerWhatsApp = document.getElementById('footer-whatsapp-link');
                const phoneNumber = '5565999287778';
                const footerMessage = encodeURIComponent('Olá! Visitei o site da Mabelle Secrets e gostaria de mais informações.');
                footerWhatsApp.href = `https://wa.me/${phoneNumber}?text=${footerMessage}`;

                // Listener para "Sugestão da Noite"
                document.getElementById('gemini-suggestion-btn').addEventListener('click', () => {
                    const prompt = "Aja como um especialista de produtos eróticos, sofisticado e discreto, da loja 'Mabelle Secrets'. Sugira uma experiência romântica para uma noite especial, utilizando criativamente os seguintes produtos da nossa loja: Vibrador Sônico Pro, Lingerie Renda Noire, e Óleo de Massagem Corporal. Descreva um cenário inspirador, focando na conexão e descoberta do casal. A resposta deve ser um parágrafo curto, elegante e sedutor, escrito em português do Brasil.";
                    const resultContainer = document.getElementById('gemini-suggestion-result');
                    callGeminiAPI(prompt, resultContainer);
                });

                // Listener para "Descrição Criativa"
                document.getElementById('gemini-description-btn').addEventListener('click', () => {
                    if (currentProduct) {
                         const prompt = `Você é um copywriter poético e sedutor da loja 'Mabelle Secrets'. Crie uma descrição alternativa, curta e inspiradora (2-3 frases) para o produto: "${currentProduct.name}". Foque nas sensações e na promessa da experiência, em vez de detalhes técnicos. Use uma linguagem elegante e sugestiva, em português do Brasil.`;
                         const resultContainer = document.querySelector('#page-product-detail .product-description');
                         callGeminiAPI(prompt, resultContainer);
                    }
                });

                navigateTo('page-home', false);
            };

            // --- LÓGICA DO VERIFICADOR DE IDADE ---
            if (sessionStorage.getItem('isOfAge') === 'true') {
                ageGate.style.display = 'none';
                mainContent.style.display = 'block';
                initializeSite();
            }

            document.getElementById('age-gate-enter').addEventListener('click', () => {
                sessionStorage.setItem('isOfAge', 'true');
                ageGate.style.opacity = '0';
                setTimeout(() => {
                    ageGate.style.display = 'none';
                    mainContent.style.display = 'block';
                    initializeSite();
                }, 500);
            });

            document.getElementById('age-gate-exit').addEventListener('click', () => {
                window.location.href = 'https://www.google.com';
            });
        });
    </script>

</body>
</html>

